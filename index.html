<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tela Fusion ‚Ä¢ Filmes e Trailers</title>
  <meta name="description" content="Tela Fusion ‚Äî descubra e salve seus filmes favoritos" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body {
      margin:0;
      font-family:'Poppins', sans-serif;
      background:#111;
      color:#fff;
    }
    .header {
      background:#000;
      padding:1rem;
      text-align:center;
      font-size:1.4rem;
      font-weight:600;
      letter-spacing:1px;
    }
    .hero {
      background:linear-gradient(to bottom,rgba(0,0,0,0.6),rgba(0,0,0,0.9)),
      url("https://images.unsplash.com/photo-1524985069026-dd778a71c7b4?q=80&w=1400") center/cover no-repeat;
      padding:5rem 2rem;
      text-align:center;
    }
    .hero h1 { font-size:2.5rem; margin-bottom:1rem; }
    .section-title { font-size:1.5rem; font-weight:600; margin:2rem 1rem 1rem; }
    .grid {
      display:grid;
      grid-template-columns:repeat(auto-fill,minmax(180px,1fr));
      gap:1rem;
      padding:1rem;
    }
    .card {
      background:#222;
      border-radius:10px;
      overflow:hidden;
      cursor:pointer;
      transition:transform .2s;
    }
    .card:hover { transform:scale(1.05); }
    .card img { width:100%; display:block; }
    .card h3 { font-size:1rem; margin:.5rem; }
    .card p { font-size:.85rem; margin:0 .5rem 1rem; color:#bbb; }
    dialog.modal {
      border:none;
      border-radius:10px;
      padding:1rem;
      max-width:600px;
      width:90%;
    }
    dialog::backdrop { background:rgba(0,0,0,.8); }
    .modal-content iframe { width:100%; height:300px; border:none; margin-bottom:1rem; }
    .btn { background:#e50914; color:#fff; border:none; padding:.6rem 1rem; border-radius:6px; cursor:pointer; }
    footer { text-align:center; padding:2rem 1rem; background:#000; margin-top:2rem; }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header class="header">
    üé¨ Tela Fusion
  </header>

  <!-- HERO -->
  <section class="hero">
    <h1>Descubra os melhores filmes</h1>
    <p>Assista trailers, conhe√ßa detalhes e adicione aos seus favoritos.</p>
  </section>

  <!-- MAIS VISTOS DO MUNDO -->
  <h2 class="section-title">Mais Vistos do Mundo</h2>
  <section class="grid" id="grid-top" aria-live="polite"></section>

  <!-- CAT√ÅLOGO GERAL -->
  <h2 class="section-title">Cat√°logo Geral</h2>
  <main class="grid" id="grid" aria-live="polite"></main>

  <!-- MODAL -->
  <dialog class="modal" id="modal">
    <div class="modal-content">
      <h2 id="modal-title"></h2>
      <iframe id="modal-trailer" src="" allowfullscreen></iframe>
      <p id="modal-overview"></p>
      <p><strong>Dura√ß√£o:</strong> <span id="modal-minutes"></span> min</p>
      <p><strong>G√™neros:</strong> <span id="modal-genres"></span></p>
      <button class="btn" id="fav-btn">‚≠ê Favoritar</button>
      <button class="btn" id="close-btn">Fechar</button>
    </div>
  </dialog>

  <!-- FOOTER -->
  <footer>
    ¬© 2025 Tela Fusion. Todos os direitos reservados.
  </footer>

  <script>
    const TOP_MOVIES = [
      { id:101, title:"Avatar", year:2009, poster:"https://m.media-amazon.com/images/I/41kTVLeW1CL._AC_.jpg", genres:["Fic√ß√£o Cient√≠fica","Aventura"], rating:7.8, minutes:162, trailer:"https://www.youtube.com/embed/5PSNL1qE6VY", overview:"No exuberante mundo de Pandora, Jake Sully se envolve em uma batalha pela sobreviv√™ncia dos Na'vi." },
      { id:102, title:"Vingadores: Ultimato", year:2019, poster:"https://m.media-amazon.com/images/I/81ExhpBEbHL._AC_SL1500_.jpg", genres:["A√ß√£o","Her√≥is"], rating:8.4, minutes:181, trailer:"https://www.youtube.com/embed/TcMBFSGVi1c", overview:"Os Vingadores restantes unem for√ßas para reverter o estalo de Thanos e restaurar o universo." },
      { id:103, title:"Titanic", year:1997, poster:"https://m.media-amazon.com/images/I/71rNJQ2g-EL._AC_SY679_.jpg", genres:["Drama","Romance"], rating:7.9, minutes:195, trailer:"https://www.youtube.com/embed/kVrqfYjkTdQ", overview:"Um romance floresce a bordo do navio mais famoso da hist√≥ria, em meio a uma trag√©dia." },
      { id:104, title:"Star Wars: O Despertar da For√ßa", year:2015, poster:"https://m.media-amazon.com/images/I/91KkWf50SoL._AC_SL1500_.jpg", genres:["Fic√ß√£o Cient√≠fica","Aventura"], rating:7.8, minutes:138, trailer:"https://www.youtube.com/embed/sGbxmsDFVnE", overview:"Uma nova gera√ß√£o de her√≥is se levanta contra a Primeira Ordem para restaurar a paz na gal√°xia." },
      ];

    // FUN√á√ÉO RENDERIZAR
    function renderMovies(list, containerId){
      const container = document.getElementById(containerId);
      container.innerHTML = list.map(m => `
        <article class="card" data-id="${m.id}">
          <img src="${m.poster}" alt="Poster de ${m.title}">
          <h3>${m.title}</h3>
          <p>${m.year} ‚Ä¢ ‚≠ê ${m.rating}</p>
        </article>`).join("");
    }

    renderMovies(TOP_MOVIES,"grid-top");
    renderMovies(MOVIES,"grid");

    // MODAL
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modal-title");
    const modalTrailer = document.getElementById("modal-trailer");
    const modalOverview = document.getElementById("modal-overview");
    const modalMinutes = document.getElementById("modal-minutes");
    const modalGenres = document.getElementById("modal-genres");
    const favBtn = document.getElementById("fav-btn");
    const closeBtn = document.getElementById("close-btn");

    let favorites = JSON.parse(localStorage.getItem("favorites") || "[]");

    function openModal(id){
      const all = [...TOP_MOVIES,...MOVIES];
      const movie = all.find(m => m.id==id);
      if(!movie) return;

      modalTitle.textContent = movie.title;
      modalTrailer.src = movie.trailer;
      modalOverview.textContent = movie.overview;
      modalMinutes.textContent = movie.minutes;
      modalGenres.textContent = movie.genres.join(", ");

      favBtn.onclick = () => toggleFavorite(movie);
      modal.showModal();
    }

    function closeModal(){
      modal.close();
      modalTrailer.src = ""; // parar trailer
    }

    function toggleFavorite(movie){
      if(favorites.some(f => f.id===movie.id)){
        favorites = favorites.filter(f => f.id!==movie.id);
        alert(movie.title+" removido dos favoritos!");
      } else {
        favorites.push(movie);
        alert(movie.title+" adicionado aos favoritos!");
      }
      localStorage.setItem("favorites",JSON.stringify(favorites));
    }

    document.addEventListener("click", e=>{
      const card = e.target.closest(".card");
      if(card){
        openModal(card.dataset.id);
      }
    });

    closeBtn.addEventListener("click", closeModal);
  </script>
</body>
</html>
